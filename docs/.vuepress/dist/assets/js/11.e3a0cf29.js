(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{171:function(t,e,n){},347:function(t,e,n){"use strict";var i=n(171);n.n(i).a},371:function(t,e,n){"use strict";n.r(e);n(247),n(93),n(156),n(121),n(122);var i=n(186),o=(n(90),n(259),n(262)),r=n.n(o),a=n(304),l=n.n(a),s=n(305),u=n.n(s),c=n(337),d=n.n(c),h=n(339),f=n.n(h),p=n(344),y=n.n(p),v=n(345),m=n(346);function w(t){return!!t&&("object"===Object(i.a)(t)||"function"==typeof t)&&"function"==typeof t.then}function g(t,e){return e?t[e]:t}var k={name:"ItemListSelector",components:{VirtualList:y.a},props:{value:{default:function(){return[]}},optionsData:{type:[Array,Function,Promise],default:function(){return[]}},multiple:{type:Boolean,default:!0},loadingText:{type:String,default:"Loading..."},notFoundText:{type:String,default:"No results"},searchText:{type:String,default:"Search"},splitKeyword:{type:Boolean,default:!0},matchTemplate:{type:Function,default:function(t){return"<mark>".concat(t,"</mark>")}},labelKey:{type:String,default:"label"},valueKey:{type:String},filterMethod:{type:Function},optionTemplate:{type:Function},optionHeight:{type:Number,default:34},optionsRemain:{type:Number,default:6},optionsBench:{type:Number,default:6}},data:function(){return{internalValue:[],internalOptions:[],loading:!1,keyword:"",debounceKeyword:"",startIndex:0,activeIndex:-1}},computed:{filtedData:function(){var t=this,e=this.debounceKeyword;if(e){var n;if(this.filterMethod)n=this.filterMethod;else{var i=this.splitKeyword?m.hasMatch:m.hasExactMatch;n=function(e,n){var o;try{o=t.optionToString(e).toString()}catch(t){}return o&&i(o,n)}}return this.internalOptions.filter((function(t){return n(t,e)}))}return this.internalOptions},optionToString:function(){var t=this;return this.optionTemplate||function(e){return d()(e)&&t.labelKey?e[t.labelKey]:e}}},watch:{keyword:function(){this.throttleKeyword()},debounceKeyword:function(){this.startIndex=0,this.activeIndex=-1},value:"initValue",optionsData:"initOptionsData"},created:function(){this.multiple&&!Array.isArray(this.value)&&console.error("[ItemListSelect error] Expected array with v-model/value in multiple mode, got "+Object(i.a)(this.value)+" with value "+this.value),this.initOptionsData()},methods:{initOptionsData:function(){var t,e=this,n=function(t){Array.isArray(t)&&(e.internalOptions=t,e.loading=!1,e.initValue())},i=this.optionsData;if(t=i,Array.isArray(t))n(i);else if(function(t){return"function"==typeof t}(i)){this.loading=!0;var o=i(n);w(o)&&o.then((function(t){return n(t)}))}else w(i)&&(this.loading=!0,i.then((function(t){return n(t)})))},initValue:function(){var t=this;if(this.multiple&&Array.isArray(this.value))this.internalValue=this.internalOptions.filter((function(e){return t.value.includes(g(e,t.valueKey))}));else{var e=this.internalOptions.find((function(e){return t.value===g(e,t.valueKey)}));this.internalValue=e?[e]:[]}this.syncValue(this.internalValue)},syncValue:function(t){var e,n=this;u()(t,this.internalValue)||(e=this.multiple?this.valueKey?t.map((function(t){return g(t,n.valueKey)})):t:this.valueKey?t[0][this.valueKey]:t[0],this.internalValue=t,this.$emit("input",e))},throttleKeyword:f()((function(){this.debounceKeyword=this.keyword}),200),isSelected:function(t){return this.internalValue.includes(t)},highlightMatch:function(t){var e=this.splitKeyword?m.markMatch:m.markExactMatch;return this.debounceKeyword?e(t,this.debounceKeyword,this.matchTemplate):t},activePrevOptions:function(){this.activeIndex>0?(this.activeIndex--,this.scrollActiveOptionToView("prev")):(this.activeIndex=this.filtedData.length-1,this.startIndex=this.filtedData.length)},activeNextOptions:function(){this.activeIndex<this.filtedData.length-1?(this.activeIndex++,this.scrollActiveOptionToView("next")):(this.activeIndex=0,this.startIndex=0)},toggleSelection:function(t){var e=this.filtedData[t];if(e){var n=[];n=this.multiple?r()(this.internalValue,[e]):[e],this.syncValue(n)}},scrollActiveOptionToView:function(t){var e=this;this.$nextTick().then((function(){var t=e.$refs.options.$el.querySelector(".item-selector__option--active");try{Object(v.a)(t,{scrollMode:"if-needed",block:"nearest",inline:"nearest"}).forEach((function(t){var e=t.el,n=t.top,i=t.left;e.scrollTop=n,e.scrollLeft=i}))}catch(t){}}))},setValue:function(t){if("function"!=typeof t)throw Error('[ItemListSelect Error] "setValue()" accept a function as argument.');var e=this.internalOptions.filter(t);this.syncValue(e)},addValue:function(t){if(!this.multiple)throw Error('[ItemListSelect Error] "addValue()" only works on multiple mode.');if("function"!=typeof t)throw Error('[ItemListSelect Error] "addValue()" accept a function as argument.');var e=this.internalOptions.filter(t),n=l()(this.internalValue,e);this.syncValue(n)},removeValue:function(t){if("function"!=typeof t)throw Error('[ItemListSelect Error] "removeValue()" accept a function as argument.');var e=this.internalValue.filter((function(e){return!t(e)}));this.syncValue(e)},reset:function(){this.keyword="",this.syncValue([])}}},x=(n(347),n(1)),V=Object(x.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"item-selector",on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.preventDefault(),t.activePrevOptions(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.activeNextOptions(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.toggleSelection(t.activeIndex))}]}},[n("div",{staticClass:"item-selector__searchbar"},[""!==t.keyword?n("span",{staticClass:"item-selector__searchbar-clean",on:{click:function(e){t.keyword=""}}}):t._e(),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.keyword,expression:"keyword",modifiers:{trim:!0}}],attrs:{placeholder:t.searchText,type:"text"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),0===t.filtedData.length?n("div",{staticClass:"item-selector__options--empty"},[t._v(t._s(t.loading?t.loadingText:t.notFoundText))]):n("virtual-list",{key:t.debounceKeyword,ref:"options",staticClass:"item-selector__options-wrap",attrs:{start:t.startIndex,size:t.optionHeight,remain:t.optionsRemain,bench:t.optionsBench,wtag:"ul",wclass:"item-selector__options"}},t._l(t.filtedData,(function(e,i){return n("li",{key:i,class:["item-selector__option",{"item-selector__option--checked":t.isSelected(e),"item-selector__option--active":i===t.activeIndex}],on:{click:function(e){return t.toggleSelection(i)},mouseenter:function(e){t.activeIndex=i}}},[t._t("option-template",[n("span",{domProps:{innerHTML:t._s(t.highlightMatch(t.optionToString(e)))}})],null,{option:e,keyword:t.keyword,selected:t.isSelected(e)})],2)})),0)],1)}),[],!1,null,null,null).exports;V.install=function(t){t.component(V.name,V)},"undefined"!=typeof window&&window.Vue&&V.install(window.Vue);e.default=V}}]);