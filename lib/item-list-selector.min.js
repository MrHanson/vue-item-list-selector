!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("vue-property-decorator")):"function"==typeof define&&define.amd?define("item-list-selector",["vue-property-decorator"],t):"object"==typeof exports?exports["item-list-selector"]=t(require("vue-property-decorator")):e.ItemListSelector=t(e.VuePropertyDecorator)}("undefined"!=typeof self?self:this,function(e){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(9),s=n(10),c=(o=s)&&o.__esModule?o:{default:o};function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var p=function(e,t,n,o){var r,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(a<3?r(s):a>3?r(t,n,s):r(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},u=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.keyword="",e.curPage=1,e.optionActiveIndex=-1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Vue),r(t,[{key:"onKeywordChanged",value:function(){this.curPage=1,this.optionActiveIndex=-1}},{key:"setSelection",value:function(e){if("function"!=typeof e)throw Error('[item-list-selector] "setSelection()" accept a function as argument.');var t=this.data.filter(e);this.$emit("selection-change",t)}},{key:"addSelection",value:function(e){var t=this;if("function"!=typeof e)throw Error('[item-list-selector] "addSelection()" accept a function as argument.');var n=this.data.filter(function(n){return e(n)&&!t.isSelected(n)}),o=[].concat(l(this.selection),l(n));this.$emit("selection-change",o)}},{key:"removeSelection",value:function(e){if("function"!=typeof e)throw Error('[item-list-selector] "removeSelection()" accept a function as argument.');var t=this.selection.filter(function(t){return!e(t)});this.$emit("selection-change",t)}},{key:"reset",value:function(){this.curPage=1,this.keyword="",this.$emit("selection-change",[])}},{key:"highlightMatch",value:function(e,t){return this.keyword?(0,c.default)(e,this.keyword,t):e}},{key:"isSelected",value:function(e){return this.selection&&this.selection.indexOf(e)>-1}},{key:"handleKeywordInput",value:function(e){switch(e.keyCode){case 38:this.activePrevOptions();break;case 40:this.activeNextOptions();break;case 33:e.preventDefault(),this.goPrevPage();break;case 34:e.preventDefault(),this.goNextPage();break;case 13:this.toggleSelection(this.optionActiveIndex)}}},{key:"goPrevPage",value:function(){this.optionActiveIndex=-1,this.curPage=Math.max(this.curPage-1,1)}},{key:"goNextPage",value:function(){this.optionActiveIndex=-1,this.curPage=Math.min(this.curPage+1,this.totalPage)}},{key:"activePrevOptions",value:function(){this.optionActiveIndex<1?this.optionActiveIndex=this.showingData.length-1:this.optionActiveIndex--}},{key:"activeNextOptions",value:function(){this.optionActiveIndex<this.showingData.length-1?this.optionActiveIndex++:this.optionActiveIndex=0}},{key:"toggleSelection",value:function(e){var t=this.showingData[e];if(t){var n=this.selection.indexOf(t),o=[].concat(l(this.selection));n>-1?(o.splice(n,1),this.$emit("selection-remove",t,o)):(o.push(t),this.$emit("selection-add",t,o)),this.$emit("selection-change",o)}}},{key:"showingData",get:function(){return this.usePage?[].concat(l(this.filtedData)).splice((this.curPage-1)*this.pageSize,this.pageSize):this.filtedData}},{key:"filtedData",get:function(){var e=this;return""===this.keyword?[].concat(l(this.data)):this.data.filter(function(t){return e.optionTemplate(t).toLowerCase().indexOf(e.keyword.toLowerCase())>-1})}},{key:"totalPage",get:function(){return this.usePage&&Math.ceil(this.filtedData.length/this.pageSize)||1}}]),t}();p([(0,a.Prop)({type:Array,default:function(){return[]}}),(0,a.Model)("selection-change")],u.prototype,"selection",void 0),p([(0,a.Prop)({type:Array,default:function(){return[]}})],u.prototype,"data",void 0),p([(0,a.Prop)({type:Boolean,default:!0})],u.prototype,"usePage",void 0),p([(0,a.Prop)({type:Number,default:10})],u.prototype,"pageSize",void 0),p([(0,a.Prop)({type:String,default:"无匹配记录"})],u.prototype,"notFoundText",void 0),p([(0,a.Prop)({type:String,default:"请输入搜索关键字"})],u.prototype,"searchText",void 0),p([(0,a.Prop)({type:String,default:"上一页"})],u.prototype,"prevPageText",void 0),p([(0,a.Prop)({type:String,default:"下一页"})],u.prototype,"nextPageText",void 0),p([(0,a.Prop)({type:Function,default:function(e){return e&&e.label?e.label:""}})],u.prototype,"optionTemplate",void 0),p([(0,a.Watch)("keyword")],u.prototype,"onKeywordChanged",null),u=p([a.Component],u),t.default=u,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(2),i=(o=r)&&o.__esModule?o:{default:o};t.default=i.default,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,function(){return o[e]})}(i);var a=n(11);var s=function(e){n(3)},c=n(8)(r.a,a.a,!1,s,null,null);t.default=c.exports},function(e,t,n){var o=n(4);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(6)("f7587390",o,!0,{})},function(e,t,n){(e.exports=n(5)(!1)).push([e.i,"\n.item-selector {\n  position: relative;\n  height: 100%;\n  line-height: 1;\n  /* 分页 */\n}\n.item-selector__searchbar {\n  background-color: #fff;\n  padding: 8px;\n}\n.item-selector__searchbar-inner {\n  position: relative;\n}\n.item-selector__searchbar-inner input {\n  width: 100%;\n  height: 30px;\n  padding: 0 8px;\n  border: 1px solid #eee;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  outline: none;\n  background-color: transparent;\n  font-size: 12px;\n}\n.item-selector__searchbar-inner input:focus {\n  border-color: #66afe9;\n  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(102, 175, 233, 0.6);\n          box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(102, 175, 233, 0.6);\n}\n.item-selector__searchbar-clean {\n  width: 20px;\n  height: 20px;\n  line-height: 20px;\n  position: absolute;\n  top: 50%;\n  right: 5px;\n  margin-top: -10px;\n  text-align: center;\n  cursor: pointer;\n  opacity: .6;\n}\n.item-selector__searchbar-clean:hover {\n  opacity: 1;\n}\n.item-selector__searchbar-clean::before,\n.item-selector__searchbar-clean::after {\n  content: '';\n  position: absolute;\n  width: 16px;\n  height: 1px;\n  background-color: #999;\n  left: 50%;\n  top: 50%;\n  margin-left: -8px;\n}\n.item-selector__searchbar-clean::before {\n  -webkit-transform: rotate(45deg);\n          transform: rotate(45deg);\n}\n.item-selector__searchbar-clean::after {\n  -webkit-transform: rotate(-45deg);\n          transform: rotate(-45deg);\n}\n.item-selector__options {\n  margin: 0;\n  padding: 0;\n  list-style: none;\n}\n.item-selector__option {\n  font-size: 12px;\n  font-weight: 400;\n  line-height: 1.8em;\n  display: block;\n  clear: both;\n  padding: 5px 10px;\n  cursor: pointer;\n  text-align: left;\n  white-space: nowrap;\n  color: #333;\n  border-top: 1px solid #efefef;\n  position: relative;\n}\n.item-selector__option:hover {\n  background-color: #f7f7f7;\n}\n.item-selector__option:hover::after {\n  display: block;\n}\n.item-selector__option::after {\n  position: absolute;\n  top: 50%;\n  right: 15px;\n  display: none;\n  width: 4px;\n  height: 12px;\n  margin-top: -8px;\n  content: '';\n  -webkit-transform: rotate(45deg);\n          transform: rotate(45deg);\n  text-align: center;\n  border: solid #ddd;\n  border-width: 0 3px 2px 0;\n}\n.item-selector .option-checked {\n  background-color: #eaf8fe;\n  color: #666;\n  border-top: 1px solid #d8eef7;\n  border-bottom: 1px solid #d8eef7;\n  z-index: 1;\n  margin-bottom: -1px;\n}\n.item-selector .option-checked.select__option-active {\n  background-color: #dff6ff;\n}\n.item-selector .option-checked::after {\n  display: block;\n  border-color: #2db7f5;\n}\n.item-selector .option-checked:hover {\n  background-color: #dff6ff;\n}\n.item-selector .option-active {\n  background-color: #dff6ff;\n}\n.item-selector .option-active::after {\n  display: block;\n}\n.item-selector .option-active:hover {\n  background-color: #e6f8ff;\n}\n.item-selector__option-notfound {\n  font-size: 12px;\n  font-weight: 400;\n  line-height: 1.8em;\n  padding: 10px 0;\n  text-align: center;\n}\n.item-selector .match {\n  color: #000;\n  background-color: #ff6;\n}\n.item-selector__page {\n  font-size: 12px;\n  line-height: 2em;\n  padding: 5px;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  text-align: center;\n  background-color: #f9f9f9;\n  border-top: 1px solid #ddd;\n}\n.item-selector .pagelink {\n  padding: 0 5px;\n  color: #333;\n}\n.item-selector .pagelink:hover {\n  cursor: pointer;\n  background-color: #efefef;\n}\n.item-selector .pagelink-disabled {\n  color: #999;\n}\n.item-selector .pagelink-disabled:hover {\n  cursor: not-allowed;\n  background-color: transparent;\n}\n.item-selector .pagelink-prev {\n  float: left;\n}\n.item-selector .pagelink-prev::after {\n  padding: 0 5px;\n}\n.item-selector .pagelink-next {\n  float: right;\n}\n.item-selector .pagelink-next::after {\n  padding: 0 5px;\n}\n.item-selector .pagenum .spe {\n  padding: 0 5px;\n}\n",""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var r=(a=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),i=o.sources.map(function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"});return[n].concat(i).concat([r]).join("\n")}var a;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(o[i]=!0)}for(r=0;r<e.length;r++){var a=e[r];"number"==typeof a[0]&&o[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var r=n(7),i={},a=o&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,l=!1,p=function(){},u=null,f="data-vue-ssr-id",d="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e){for(var t=0;t<e.length;t++){var n=e[t],o=i[n.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](n.parts[r]);for(;r<n.parts.length;r++)o.parts.push(v(n.parts[r]));o.parts.length>n.parts.length&&(o.parts.length=n.parts.length)}else{var a=[];for(r=0;r<n.parts.length;r++)a.push(v(n.parts[r]));i[n.id]={id:n.id,refs:1,parts:a}}}}function g(){var e=document.createElement("style");return e.type="text/css",a.appendChild(e),e}function v(e){var t,n,o=document.querySelector("style["+f+'~="'+e.id+'"]');if(o){if(l)return p;o.parentNode.removeChild(o)}if(d){var r=c++;o=s||(s=g()),t=b.bind(null,o,r,!1),n=b.bind(null,o,r,!0)}else o=g(),t=function(e,t){var n=t.css,o=t.media,r=t.sourceMap;o&&e.setAttribute("media",o);u.ssrId&&e.setAttribute(f,t.id);r&&(n+="\n/*# sourceURL="+r.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,o),n=function(){o.parentNode.removeChild(o)};return t(e),function(o){if(o){if(o.css===e.css&&o.media===e.media&&o.sourceMap===e.sourceMap)return;t(e=o)}else n()}}e.exports=function(e,t,n,o){l=n,u=o||{};var a=r(e,t);return h(a),function(t){for(var n=[],o=0;o<a.length;o++){var s=a[o];(c=i[s.id]).refs--,n.push(c)}t?h(a=r(e,t)):a=[];for(o=0;o<n.length;o++){var c;if(0===(c=n[o]).refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete i[c.id]}}}};var m,y=(m=[],function(e,t){return m[e]=t,m.filter(Boolean).join("\n")});function b(e,t,n,o){var r=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=y(t,r);else{var i=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}},function(e,t){e.exports=function(e,t){for(var n=[],o={},r=0;r<t.length;r++){var i=t[r],a=i[0],s={id:e+":"+r,css:i[1],media:i[2],sourceMap:i[3]};o[a]?o[a].parts.push(s):n.push(o[a]={id:a,parts:[s]})}return n}},function(e,t){e.exports=function(e,t,n,o,r,i){var a,s=e=e||{},c=typeof e.default;"object"!==c&&"function"!==c||(a=e,s=e.default);var l,p="function"==typeof s?s.options:s;if(t&&(p.render=t.render,p.staticRenderFns=t.staticRenderFns,p._compiled=!0),n&&(p.functional=!0),r&&(p._scopeId=r),i?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},p._ssrRegister=l):o&&(l=o),l){var u=p.functional,f=u?p.render:p.beforeCreate;u?(p._injectStyles=l,p.render=function(e,t){return l.call(t),f(e,t)}):p.beforeCreate=f?[].concat(f,l):[l]}return{esModule:a,exports:s,options:p}}},function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.tag,r=void 0===o?"span":o,i=n.className,a=void 0===i?"match":i;if(t&&(t=t.trim())){var s=t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),c=new RegExp(s,"gi");return e.replace(c,function(e){return"<"+r+' class="'+a+'">'+e+"</"+r+">"})}return e},e.exports=t.default},function(e,t,n){"use strict";var o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"item-selector"},[n("div",{staticClass:"item-selector__searchbar"},[n("div",{staticClass:"item-selector__searchbar-inner"},[""!==e.keyword?n("div",{staticClass:"item-selector__searchbar-clean",on:{click:function(t){e.keyword=""}}}):e._e(),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.keyword,expression:"keyword",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:e.searchText},domProps:{value:e.keyword},on:{keyup:function(t){e.handleKeywordInput(t)},input:function(t){t.target.composing||(e.keyword=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),n("div",{staticClass:"item-selector__result"},[n("ul",{staticClass:"item-selector__options"},[0===e.showingData.length?n("li",{staticClass:"item-selector__option-notfound"},[e._v(e._s(e.notFoundText))]):e._e(),e._v(" "),e._l(e.showingData,function(t,o){return n("li",{key:o,class:["item-selector__option",{"option-checked":e.isSelected(t),"option-active":o===e.optionActiveIndex}],domProps:{innerHTML:e._s(e.highlightMatch(e.optionTemplate(t)))},on:{click:function(t){e.toggleSelection(o)}}})})],2)]),e._v(" "),e.usePage?n("div",{staticClass:"item-selector__page"},[n("span",{class:["pagelink","pagelink-prev",{"pagelink-disabled":1===e.curPage}],on:{click:e.goPrevPage}},[e._v(e._s(e.prevPageText))]),e._v(" "),n("span",{staticClass:"page-num"},[n("span",{staticClass:"cur"},[e._v(e._s(e.curPage))]),e._v(" "),n("span",{staticClass:"spe"},[e._v("/")]),e._v(" "),n("span",{staticClass:"total"},[e._v(e._s(e.totalPage))])]),e._v(" "),n("span",{class:["pagelink","pagelink-next",{"pagelink-disabled":e.curPage===e.totalPage}],on:{click:e.goNextPage}},[e._v(e._s(e.nextPageText))])]):e._e()])},staticRenderFns:[]};t.a=o}])});